pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- pset(r+x,r+y-n,6)
-- z = cos(distance/amplitude-t())*scalar
--globals
function _init()
	a=4
	r = 64
	frequency = r
	scalar = r/a
	vertical = r / 1
	horizontal = r * 0.0125
	turbidity = 0
	-- offset = 128 - r
	offset = 0
	g = flr(rnd(16))
end

function fourier(n,c)
	--local f_color = flr(rnd(15))+1
	local phase = sin(t())
	for y = -(r/2),(r/2),vertical do
		cls(g+7)
		--local y_color = flr(rnd(15))+1	
		for x = -r,r,horizontal do
			--local x_color = flr(rnd(15))+1
			local sum = 0
			local noise = rnd() * turbidity
			for i = 0, n do
				--local i_color = flr(rnd(15))+1
				if (rnd() >= 0.5) noise *= -1
				local val = (sin((i*x)/frequency-t())/i)*scalar
				sum += val
			end
			local x_pos = (r + x + noise)
			local y_pos = (r/2)+y-sum+noise
			pset(x_pos, y_pos, c)
		end
	end
end

function _draw()
	-- local c = flr(rnd(15))+1
	fourier(a,g)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
