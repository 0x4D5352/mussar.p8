pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- rules:
-- c has 3 states: on/dying/off
-- c has 8 neighbors
-- if count(on(n)) == 2, then on
-- if c == on, c = dying
-- if c == dying, c = off

function _init()
	cls()
	on = 7
	dying = 5
	off = 0
	for y=0,127,2 do
		for x=0,127,2 do
			if rnd() >=0.95 then
				pset(x,y,on)
			end
		end
	end
end

function count_neighbors(x,y)
	local neighbors=0
	-- |-1,-1| 0,-1| 1,-1|
	-- |-1, 0| self| 1, 0|
	-- |-1, 1| 0, 1| 1, 1|
	for ny=-1,1,1 do
		for nx=-1,1,1 do
			if nx==0 and ny==0 then
				neighbors += 0
			else
				if pget(x+nx,y+ny) == on then
					neighbors+=1
				end
			end
		end
	end
	return neighbors
end

-- todo: double check this algo
function _draw()
	for y=0,127,1 do
		for x=0,127,1 do
			if count_neighbors(x,y) == 2 then
				pset(x,y,on)
			else if pget(x,y) == on then
				pset(x,y,dying)
			else if pget(x,y) == dying then
				pset(x,y,off)
			end
		end
	end
end
	end

end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
